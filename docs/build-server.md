<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/build-server.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# Build Server


## Getting .received files from CI


### AppVeyor
cts from scripts](https://www.appveyor.com/docs/packaging-artifacts/#pushing-artifacts-from-scripts).


## Custom Test directory

In some scenarios, as part of a build, the test assemblies are copied to a different directory or machine to be run. In this case custom code will be required to derive the path to the `.verified.` files. This can be done using a custom delegate via `VerifierSettings.DeriveTestDirectory`. The parameters passed are as follows:

 * `type`: The test type.
 * `testDirectory`: The directory that the test source file existed in at compile time.
 * `projectDirectory`: The directory that the project existed in at compile time.

For example a possible implementation for [AppVeyor](https://www.appveyor.com/) could be:

<!-- snippet: DeriveTestDirectory -->
<a id='snippet-derivetestdirectory'/></a>
```cs
if (BuildServerDetector.Detected)
{
    var buildDirectory = Environment.GetEnvironmentVariable("APPVEYOR_BUILD_FOLDER")!;
    VerifierSettings.DeriveTestDirectory(
        (sourceFile, projectDirectory) =>
        {
            var testDirectory = Path.GetDirectoryName(sourceFile)!;
            var testDirectorySuffix = testDirectory.Replace(projectDirectory!, string.Empty);
            return Path.Combine(buildDirectory, testDirectorySuffix);
        });
}
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L65-L79' title='File snippet `derivetestdirectory` was extracted from'>snippet source</a> | <a href='#snippet-derivetestdirectory' title='Navigate to start of snippet `derivetestdirectory`'>anchor</a></sup>
<!-- endsnippet -->
