<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/serializer-settings.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

# Serializer settings

Serialization settings can be customized at three levels:

 * Method: Will run the verification in the current test method.
 * Class: Will run for all verifications in all test methods for a test class.
 * Global: Will run for test methods on all tests.

<!-- toc -->
## Contents

  * [Not valid json](#not-valid-json)
  * [Default settings](#default-settings)
  * [Custom quotes handling](#custom-quotes-handling)
  * [QuoteName is false](#quotename-is-false)
  * [Empty collections are ignored](#empty-collections-are-ignored)
  * [Guids are scrubbed](#guids-are-scrubbed)
  * [Dates are scrubbed](#dates-are-scrubbed)
  * [Default Booleans are ignored](#default-booleans-are-ignored)
  * [Change defaults at the verification level](#change-defaults-at-the-verification-level)
  * [Changing Json.NET settings](#changing-jsonnet-settings)
    * [Globally](#globally)
    * [Instance](#instance)
    * [Json.NET Converter](#jsonnet-converter)
  * [Scoped settings](#scoped-settings)
  * [Ignoring a type](#ignoring-a-type)
  * [Ignoring a instance](#ignoring-a-instance)
  * [Obsolete members ignored](#obsolete-members-ignored)
    * [Including Obsolete members](#including-obsolete-members)
  * [Ignore member by expressions](#ignore-member-by-expressions)
  * [Ignore member by name](#ignore-member-by-name)
  * [Members that throw](#members-that-throw)
  * [DisableNewLineEscaping](#disablenewlineescaping)
  * [TreatAsString](#treatasstring)<!-- endToc -->


## Not valid json

Note that the output is technically not valid json. [Single quotes are used](docs/serializer-settings.md#single-quotes-used) and [names are not quoted](docs/serializer-settings.md#quotename-is-false). The reason for this is to make the resulting output easier to read and understand.


## Default settings

The default serialization settings are:

<!-- snippet: defaultSerialization -->
<a id='299038c4'></a>
```cs
var settings = new JsonSerializerSettings
{
    Formatting = Formatting.Indented,
    ReferenceLoopHandling = ReferenceLoopHandling.Ignore,
    DefaultValueHandling = DefaultValueHandling.Ignore
};
```
<sup><a href='/src/Verify/Serialization/SerializationSettings.cs#L163-L172' title='Snippet source file'>snippet source</a> | <a href='#299038c4' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Custom quotes handling

[JsonTextWriter.QuoteChar](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonTextWriter_QuoteChar.htm) is set to single quotes `'`. The reason for this is that it makes approval files cleaner and easier to read and visualize/understand differences.

If a string being serialized contains single quotes `'`, and does not contain double quotes `"`, then JsonTextWriter.QuoteChar will be double quotes `"`.


## QuoteName is false

[JsonTextWriter.QuoteName](https://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_JsonTextWriter_QuoteName.htm) is set to false. The reason for this is that it makes approval files cleaner and easier to read and visualize/understand differences.


## Empty collections are ignored

By default empty collections are ignored during verification.

To disable this behavior globally use:

<!-- snippet: DontIgnoreEmptyCollections -->
<a id='3a2c2667'></a>
```cs
VerifierSettings.ModifySerialization(_ => _.DontIgnoreEmptyCollections());
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L195-L197' title='Snippet source file'>snippet source</a> | <a href='#3a2c2667' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Guids are scrubbed

By default guids are sanitized during verification. This is done by finding each guid and taking a counter based that that specific guid. That counter is then used replace the guid values. This allows for repeatable tests when guid values are changing.

<!-- snippet: guid -->
<a id='34fe9adc'></a>
```cs
var guid = Guid.NewGuid();
var target = new GuidTarget
{
    Guid = guid,
    GuidNullable = guid,
    GuidString = guid.ToString(),
    OtherGuid = Guid.NewGuid(),
};

await Verifier.Verify(target);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L394-L407' title='Snippet source file'>snippet source</a> | <a href='#34fe9adc' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Results in the following:

<!-- snippet: SerializationTests.ShouldReUseGuid.verified.txt -->
<a id='c8162c04'></a>
```txt
{
  Guid: Guid_1,
  GuidNullable: Guid_1,
  GuidString: Guid_1,
  OtherGuid: Guid_2
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.ShouldReUseGuid.verified.txt#L1-L6' title='Snippet source file'>snippet source</a> | <a href='#c8162c04' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

To disable this behavior globally use:

<!-- snippet: DontScrubGuids -->
<a id='d55ddea9'></a>
```cs
VerifierSettings.ModifySerialization(_ => _.DontScrubGuids());
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L202-L204' title='Snippet source file'>snippet source</a> | <a href='#d55ddea9' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Strings containing inline Guids can also be scrubbed. To enable this behavior, use:

<!-- snippet: ScrubInlineGuids -->
<a id='a3c65a19'></a>
```cs
VerifierSettings.ModifySerialization(_ => _.ScrubInlineGuids());
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L209-L211' title='Snippet source file'>snippet source</a> | <a href='#a3c65a19' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Dates are scrubbed

By default dates (`DateTime` and `DateTimeOffset`) are sanitized during verification. This is done by finding each date and taking a counter based that that specific date. That counter is then used replace the date values. This allows for repeatable tests when date values are changing.

<!-- snippet: Date -->
<a id='e927d067'></a>
```cs
var dateTime = DateTime.Now;
var dateTimeOffset = DateTimeOffset.Now;
var target = new DateTimeTarget
{
    DateTime = dateTime,
    DateTimeNullable = dateTime,
    DateTimeString = dateTime.ToString("F"),
    DateTimeOffset = dateTimeOffset,
    DateTimeOffsetNullable = dateTimeOffset,
    DateTimeOffsetString = dateTimeOffset.ToString("F"),
};

await Verifier.Verify(target);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L28-L44' title='Snippet source file'>snippet source</a> | <a href='#e927d067' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Results in the following:

<!-- snippet: SerializationTests.ShouldReUseDatetime.verified.txt -->
<a id='fc85b66d'></a>
```txt
{
  DateTime: DateTime_1,
  DateTimeNullable: DateTime_1,
  DateTimeOffset: DateTimeOffset_1,
  DateTimeOffsetNullable: DateTimeOffset_1,
  DateTimeString: DateTimeOffset_2,
  DateTimeOffsetString: DateTimeOffset_2
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.ShouldReUseDatetime.verified.txt#L1-L8' title='Snippet source file'>snippet source</a> | <a href='#fc85b66d' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

To disable this behavior globally use:

<!-- snippet: DontScrubDateTimes -->
<a id='733edfbe'></a>
```cs
VerifierSettings.ModifySerialization(_ => _.DontScrubDateTimes());
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L216-L218' title='Snippet source file'>snippet source</a> | <a href='#733edfbe' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Default Booleans are ignored

By default values of `bool` and `bool?` are ignored during verification. So properties that equate to 'false' will not be written,

To disable this behavior globally use:

<!-- snippet: DontIgnoreFalse -->
<a id='db37fc85'></a>
```cs
VerifierSettings.ModifySerialization(_ => _.DontIgnoreFalse());
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L223-L225' title='Snippet source file'>snippet source</a> | <a href='#db37fc85' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Change defaults at the verification level

`DateTime`, `DateTimeOffset`, `Guid`, `bool`, and empty collection behavior can also be controlled at the verification level: 

<!-- snippet: ChangeDefaultsPerVerification -->
<a id='bd99740d'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ =>
{
    _.DontIgnoreEmptyCollections();
    _.DontScrubGuids();
    _.DontScrubDateTimes();
    _.DontIgnoreFalse();
});
await Verify(target, settings);
```
<sup><a href='/src/Verify.MSTest.Tests/VerifyObjectSamples.cs#L17-L28' title='Snippet source file'>snippet source</a> | <a href='#bd99740d' title='Start of snippet'>anchor</a></sup>
<a id='bd99740d-1'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ =>
{
    _.DontIgnoreEmptyCollections();
    _.DontScrubGuids();
    _.DontScrubDateTimes();
    _.DontIgnoreFalse();
});
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.NUnit.Tests/VerifyObjectSamples.cs#L16-L28' title='Snippet source file'>snippet source</a> | <a href='#bd99740d-1' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Changing Json.NET settings

Extra Json.NET settings can be made:


### Globally

<!-- snippet: ExtraSettingsGlobal -->
<a id='d58b604a'></a>
```cs
VerifierSettings.AddExtraSettings(_ =>
{
    _.DateFormatHandling = DateFormatHandling.MicrosoftDateFormat;
    _.TypeNameHandling = TypeNameHandling.All;
});
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L121-L129' title='Snippet source file'>snippet source</a> | <a href='#d58b604a' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


### Instance

<!-- snippet: ExtraSettingsInstance -->
<a id='b259c11b'></a>
```cs
var settings = new VerifySettings();
settings.AddExtraSettings(_ =>
{
    _.DateFormatHandling = DateFormatHandling.MicrosoftDateFormat;
    _.TypeNameHandling = TypeNameHandling.All;
});
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L131-L140' title='Snippet source file'>snippet source</a> | <a href='#b259c11b' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


### Json.NET Converter

One common use case is to register a custom [JsonConverter](https://www.newtonsoft.com/json/help/html/CustomJsonConverter.htm). As only writing is required, to help with this there is `WriteOnlyJsonConverter`, and `WriteOnlyJsonConverter<T>`.

<!-- snippet: CompanyConverter -->
<a id='6d8d9fe6'></a>
```cs
class CompanyConverter :
    WriteOnlyJsonConverter<Company>
{
    public override void WriteJson(JsonWriter writer, Company? company, JsonSerializer serializer)
    {
        if (company != null)
        {
            serializer.Serialize(writer, company.Name);
        }
    }
}
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L152-L166' title='Snippet source file'>snippet source</a> | <a href='#6d8d9fe6' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

<!-- snippet: JsonConverter -->
<a id='6d174e8b'></a>
```cs
VerifierSettings.AddExtraSettings(_ => { _.Converters.Add(new CompanyConverter()); });
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L145-L149' title='Snippet source file'>snippet source</a> | <a href='#6d174e8b' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Scoped settings

<!-- snippet: ScopedSerializer -->
<a id='c6b54cbf'></a>
```cs
var person = new Person
{
    GivenNames = "John",
    FamilyName = "Smith",
    Dob = new DateTimeOffset(2000, 10, 1, 0, 0, 0, TimeSpan.Zero),
};
var settings = new VerifySettings();
settings.ModifySerialization(
    _ => _.DontScrubDateTimes());
settings.AddExtraSettings(
    _ => { _.DateFormatHandling = DateFormatHandling.MicrosoftDateFormat; });
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L916-L930' title='Snippet source file'>snippet source</a> | <a href='#c6b54cbf' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: Verify.Xunit.Tests/VerifyObjectSamples.ScopedSerializer.verified.txt -->
<a id='12444c5b'></a>
```txt
{
  GivenNames: 'John',
  FamilyName: 'Smith',
  Dob: '\/Date(970358400000+0000)\/'
}
```
<sup><a href='/src/Verify.Xunit.Tests/VerifyObjectSamples.ScopedSerializer.verified.txt#L1-L5' title='Snippet source file'>snippet source</a> | <a href='#12444c5b' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Ignoring a type

To ignore all members that match a certain type:

<!-- snippet: AddIgnoreType -->
<a id='09b7ba9e'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ => _.IgnoreMembersWithType<ToIgnore>());

var target = new IgnoreTypeTarget
{
    ToIgnore = new ToIgnore
    {
        Property = "Value"
    },
    ToInclude = new ToInclude
    {
        Property = "Value"
    }
};
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L602-L620' title='Snippet source file'>snippet source</a> | <a href='#09b7ba9e' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.IgnoreType.verified.txt -->
<a id='e0a92f17'></a>
```txt
{
  ToInclude: {
    Property: 'Value'
  }
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.IgnoreType.verified.txt#L1-L5' title='Snippet source file'>snippet source</a> | <a href='#e0a92f17' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Ignoring a instance

To ignore instances of a type based on delegate:

<!-- snippet: AddIgnoreInstance -->
<a id='1ecb7de5'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(
    _ => { _.IgnoreInstance<Instance>(x => x.Property == "Ignore"); });

var target = new IgnoreInstanceTarget
{
    ToIgnore = new Instance
    {
        Property = "Ignore"
    },
    ToInclude = new Instance
    {
        Property = "Include"
    }
};
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L566-L585' title='Snippet source file'>snippet source</a> | <a href='#1ecb7de5' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.AddIgnoreInstance.verified.txt -->
<a id='87c6f505'></a>
```txt
{
  ToInclude: {
    Property: 'Include'
  }
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.AddIgnoreInstance.verified.txt#L1-L5' title='Snippet source file'>snippet source</a> | <a href='#87c6f505' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Obsolete members ignored

Members with an [ObsoleteAttribute](https://docs.microsoft.com/en-us/dotnet/api/system.obsoleteattribute) are ignored:

<!-- snippet: WithObsoleteProp -->
<a id='e21375bb'></a>
```cs
class WithObsolete
{
    [Obsolete] public string ObsoleteProperty { get; set; }
    public string OtherProperty { get; set; }
}

[Fact]
public Task WithObsoleteProp()
{
    var target = new WithObsolete
    {
        ObsoleteProperty = "value1",
        OtherProperty = "value2"
    };
    return Verifier.Verify(target);
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L878-L897' title='Snippet source file'>snippet source</a> | <a href='#e21375bb' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.WithObsoleteProp.verified.txt -->
<a id='d00fed72'></a>
```txt
{
  OtherProperty: 'value2'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.WithObsoleteProp.verified.txt#L1-L3' title='Snippet source file'>snippet source</a> | <a href='#d00fed72' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


### Including Obsolete members

Obsolete members can be included using `IncludeObsoletes`:

<!-- snippet: WithObsoletePropIncluded -->
<a id='c863e0aa'></a>
```cs
[Fact]
public Task WithObsoletePropIncluded()
{
    var target = new WithObsolete
    {
        ObsoleteProperty = "value1",
        OtherProperty = "value2"
    };
    var settings = new VerifySettings();
    settings.ModifySerialization(_ => { _.IncludeObsoletes(); });
    return Verifier.Verify(target, settings);
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L862-L877' title='Snippet source file'>snippet source</a> | <a href='#c863e0aa' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.WithObsoletePropIncluded.verified.txt -->
<a id='0ecb2822'></a>
```txt
{
  ObsoleteProperty: 'value1',
  OtherProperty: 'value2'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.WithObsoletePropIncluded.verified.txt#L1-L4' title='Snippet source file'>snippet source</a> | <a href='#0ecb2822' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Ignore member by expressions

To ignore members of a certain type using an expression:

<!-- snippet: IgnoreMemberByExpression -->
<a id='73fc7cf8'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ =>
{
    _.IgnoreMember<IgnoreExplicitTarget>(x => x.Property);
    _.IgnoreMember<IgnoreExplicitTarget>(x => x.Field);
    _.IgnoreMember<IgnoreExplicitTarget>(x => x.GetOnlyProperty);
    _.IgnoreMember<IgnoreExplicitTarget>(x => x.PropertyThatThrows);
});

var target = new IgnoreExplicitTarget
{
    Include = "Value",
    Field = "Value",
    Property = "Value"
};
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L709-L728' title='Snippet source file'>snippet source</a> | <a href='#73fc7cf8' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.IgnoreMemberByExpression.verified.txt -->
<a id='78fbba02'></a>
```txt
{
  Include: 'Value'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.IgnoreMemberByExpression.verified.txt#L1-L3' title='Snippet source file'>snippet source</a> | <a href='#78fbba02' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Ignore member by name

To ignore members of a certain type using type and name:

<!-- snippet: IgnoreMemberByName -->
<a id='766cdc69'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ =>
{
    _.IgnoreMember("PropertyByName");
    var type = typeof(IgnoreExplicitTarget);
    _.IgnoreMember(type, "Property");
    _.IgnoreMember(type, "Field");
    _.IgnoreMember(type, "GetOnlyProperty");
    _.IgnoreMember(type, "PropertyThatThrows");
});

var target = new IgnoreExplicitTarget
{
    Include = "Value",
    Field = "Value",
    Property = "Value",
    PropertyByName = "Value"
};
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L734-L756' title='Snippet source file'>snippet source</a> | <a href='#766cdc69' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.IgnoreMemberByName.verified.txt -->
<a id='b7b40caa'></a>
```txt
{
  Include: 'Value'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.IgnoreMemberByName.verified.txt#L1-L3' title='Snippet source file'>snippet source</a> | <a href='#b7b40caa' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## Members that throw

Members that throw exceptions can be excluded from serialization based on the exception type or properties.

By default members that throw `NotImplementedException` or `NotSupportedException` are ignored.

Note that this is global for all members on all types.

Ignore by exception type:

<!-- snippet: IgnoreMembersThatThrow -->
<a id='9cb4fc0d'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(_ => _.IgnoreMembersThatThrow<CustomException>());

var target = new WithCustomException();
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L772-L780' title='Snippet source file'>snippet source</a> | <a href='#9cb4fc0d' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.CustomExceptionProp.verified.txt -->
<a id='9b44bc43'></a>
```txt
{}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.CustomExceptionProp.verified.txt#L1-L1' title='Snippet source file'>snippet source</a> | <a href='#9b44bc43' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Ignore by exception type and expression:

<!-- snippet: IgnoreMembersThatThrowExpression -->
<a id='207f2fe5'></a>
```cs
var settings = new VerifySettings();
settings.ModifySerialization(
    _ => _.IgnoreMembersThatThrow<Exception>(x => x.Message == "Ignore"));

var target = new WithExceptionIgnoreMessage();
await Verifier.Verify(target, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L521-L530' title='Snippet source file'>snippet source</a> | <a href='#207f2fe5' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

Result:

<!-- snippet: SerializationTests.ExceptionMessageProp.verified.txt -->
<a id='2b71334c'></a>
```txt
{}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.ExceptionMessageProp.verified.txt#L1-L1' title='Snippet source file'>snippet source</a> | <a href='#2b71334c' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## DisableNewLineEscaping

By default newlines in json are escaped with `\n`:

<!-- snippet: NewLineEscapedInProperty -->
<a id='f4b198df'></a>
```cs
return Verifier.Verify(new {Property = "a\r\nb\\nc"});
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L231-L233' title='Snippet source file'>snippet source</a> | <a href='#f4b198df' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

<!-- snippet: SerializationTests.NewLineEscapedInProperty.verified.txt -->
<a id='dba66718'></a>
```txt
{
  Property: 'a\nb\nc'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.NewLineEscapedInProperty.verified.txt#L1-L3' title='Snippet source file'>snippet source</a> | <a href='#dba66718' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

This can be disabled:

<!-- snippet: DisableNewLineEscaping -->
<a id='77577450'></a>
```cs
var settings = new VerifySettings();
settings.DisableNewLineEscaping();
await Verifier.Verify(new {Property = "a\r\nb\\nc"}, settings);
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.cs#L239-L243' title='Snippet source file'>snippet source</a> | <a href='#77577450' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

<!-- snippet: SerializationTests.NewLineNotEscapedInProperty.verified.txt -->
<a id='fbb73c2d'></a>
```txt
{
  Property: 'a
b\nc'
}
```
<sup><a href='/src/Verify.Tests/Serialization/SerializationTests.NewLineNotEscapedInProperty.verified.txt#L1-L4' title='Snippet source file'>snippet source</a> | <a href='#fbb73c2d' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


## TreatAsString

Certain types, when passed directly in to Verify, are written directly without going through json serialization.

The default mapping is:

<!-- snippet: typeToStringMapping -->
<a id='5121eb28'></a>
```cs
{typeof(string), (target, settings) => (string) target},
{typeof(bool), (target, settings) => ((bool) target).ToString()},
{typeof(short), (target, settings) => ((short) target).ToString()},
{typeof(ushort), (target, settings) => ((ushort) target).ToString()},
{typeof(int), (target, settings) => ((int) target).ToString()},
{typeof(uint), (target, settings) => ((uint) target).ToString()},
{typeof(long), (target, settings) => ((long) target).ToString()},
{typeof(ulong), (target, settings) => ((ulong) target).ToString()},
{typeof(decimal), (target, settings) => ((decimal) target).ToString(CultureInfo.InvariantCulture)},
#if NET5_0
//   {typeof(Half), (target, settings) => ((Half) target).ToString(CultureInfo.InvariantCulture)},
#endif
{typeof(float), (target, settings) => ((float) target).ToString(CultureInfo.InvariantCulture)},
{typeof(double), (target, settings) => ((double) target).ToString(CultureInfo.InvariantCulture)},
{typeof(Guid), (target, settings) => ((Guid) target).ToString()},
{
    typeof(DateTime), (target, settings) =>
    {
        var dateTime = (DateTime) target;
        return dateTime.ToString("yyyy-MM-ddTHH:mm:ss.FFFFFFFz");
    }
},
{
    typeof(DateTimeOffset), (target, settings) =>
    {
        var dateTimeOffset = (DateTimeOffset) target;
        return dateTimeOffset.ToString("yyyy-MM-ddTHH:mm:ss.FFFFFFFz");
    }
},
{
    typeof(XmlNode), (target, settings) =>
    {
        var converted = (XmlNode) target;
        var document = XDocument.Parse(converted.OuterXml);
        settings.UseExtension("xml");
        return document.ToString();
    }
},
{
    typeof(XDocument), (target, settings) =>
    {
        var converted = (XDocument) target;
        settings.UseExtension("xml");
        return converted.ToString();
    }
}
```
<sup><a href='/src/Verify/Serialization/VerifierSettings.cs#L60-L109' title='Snippet source file'>snippet source</a> | <a href='#5121eb28' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->

This bypasses the Guid and DateTime scrubbing mentioned above.

Extra types can be added to this mapping:

<!-- snippet: TreatAsString -->
<a id='3a666aa5'></a>
```cs
VerifierSettings.TreatAsString<ClassWithToString>(
    (target, settings) => target.Property);
```
<sup><a href='/src/Verify.Tests/Snippets/Snippets.cs#L48-L53' title='Snippet source file'>snippet source</a> | <a href='#3a666aa5' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->
